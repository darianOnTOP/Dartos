(()=>{var x={utf8ToHex(e){return Array.from(new TextEncoder().encode(e)).map(t=>t.toString(16).padStart(2,"0")).join("")},hexToUtf8(e){let t=new Uint8Array(e.length/2);for(let s=0;s<e.length;s+=2)t[s/2]=parseInt(e.substr(s,2),16);return new TextDecoder().decode(t)},strToUint8(e){return new TextEncoder().encode(e)},bufToHex(e){return Array.from(new Uint8Array(e)).map(t=>t.toString(16).padStart(2,"0")).join("")},bufToBase64(e){let t=String.fromCharCode.apply(null,new Uint8Array(e));return btoa(t)},async sha256(e){let t=typeof e=="string"?this.strToUint8(e):e;return await crypto.subtle.digest("SHA-256",t)},async hmacSha256(e,t){let s=typeof e=="string"?this.strToUint8(e):e,i=typeof t=="string"?this.strToUint8(t):t,l=await crypto.subtle.importKey("raw",s,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await crypto.subtle.sign("HMAC",l,i)}},r=x;var d={version:"release-16.5/2",secret:"Wait, did Pixel actually unlock the secret level?!",secret2:"8dj3jjdkaed9g8"},c={decodeTransferKey(){let e=r.utf8ToHex(d.secret),t=[...d.ip].reduce((i,l)=>i+l.charCodeAt(0),0),s=r.hexToUtf8(d.transferKey).split(".")[t%16];this.decodedTransferKey=[...s].map((i,l)=>{let p=e[l%e.length];return((parseInt(i,16)-parseInt(p,16)+16)%16).toString(16)}).join("")},async generateSignature(e,t,s){let l=`hmac-sha256=${r.bufToBase64(await r.sha256(JSON.stringify(s)||""))},jsessionid=${d.jsessionId}`;return r.bufToBase64(await r.hmacSha256(this.decodedTransferKey,`(request-target): ${e} ${t} digest: ${l}`))},async generateAuthorization(){let e=await r.sha256(d.jsessionId),t=await r.hmacSha256(d.secret2,e),s=await r.sha256(r.bufToHex(t));return`${d.jsessionId}/${r.bufToHex(s)}`},async generateRequestID(){let e=await r.sha256(Date.now().toString());return r.bufToHex(e)},async fetch(e,t,s){let i=await this.generateSignature(e,t,s),l=await this.generateAuthorization(),p=await this.generateRequestID();return new Promise((m,w)=>{let a=new XMLHttpRequest;a.open(e,t,!0),a.setRequestHeader("Accept","application/json, text/plain, */*"),a.setRequestHeader("Accept-Language","en-US,en;q=0.9"),a.setRequestHeader("Authorization",l),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Dashboard-Type","SD"),a.setRequestHeader("Dashboard-Version",d.version),a.setRequestHeader("Request-Id",p),a.setRequestHeader("Signature",`keyId="algo_1", signature="${i}"`),a.setRequestHeader("X-Signature",'keyId="algo_1", signature="0x000000"'),a.onreadystatechange=()=>{if(a.readyState!==4)return;let f=JSON.parse(a.responseText);m(f)},a.send(JSON.stringify(s))})},async init(){let e=await fetch(location.href).then(t=>t.text());d.transferKey=e.match(/var transferKey = "([^"]+)"/)?.[1],d.ip=e.match(/var ip = "([^"]+)"/)?.[1],d.jsessionId=getCookie("CA.SESSION.NAME"),this.decodeTransferKey()}};async function y(){let e=Object.values(document.querySelector("#middle-school-app"))[0].return.alternate.return.memoizedProps.value.store,t=e.getState().features.lessonMSPro.selectedLesson.assignmentId,i=(await c.fetch("get",`/learning-delivery/student/lesson-assignment/${t}/attempt/context`)).reportingSkills.map(l=>({id:l.id,maxPoints:4,numPoints:4,receivedInstructionAndPractice:!0}));await c.fetch("post",`/learning-delivery/student/lesson-assignment/${t}/start`),c.fetch("post",`/learning-delivery/student/lesson-assignment/${t}/complete?allowTopicCompletion=false`,{pldClaims:[],reportingSkills:i,itemResults:[],prerequisitesRefreshed:null,analyticsRecords:[]}),e.dispatch({type:"router/navigateRoute",payload:"/dashboard/my-path",meta:{}})}location.pathname=="/mspro/dashboard/home"?c.init():alert("Inject in the dashboard");var n=document.createElement("div");n.style.position="fixed";n.style.width="200px";n.style.height="auto";n.style.border="1px solid #444";n.style.backgroundColor="rgba(0, 0, 0, 0.80)";n.style.backdropFilter="blur(4px)";n.style.color="#FFF";n.style.padding="10px";n.style.boxShadow="2px 2px 10px rgba(0, 0, 0, 0.5)";n.style.borderRadius="8px";n.style.zIndex="999999";n.style.left="100px";n.style.top="100px";n.style.userSelect="none";n.style.fontFamily='"Sofia Pro", sans-serif';document.body.appendChild(n);var o=document.createElement("div");o.style.margin="0";o.style.textAlign="center";o.style.fontSize="30px";o.style.color="#FFF";o.style.display="flex";o.style.alignItems="center";o.style.justifyContent="center";o.style.gap="5px";o.style.paddingBottom="5px";o.innerHTML=`
  <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20">
    <g>
      <path d="M9.47,10.72a.47.47,0,0,1,.23-.41L17.26,6a.44.44,0,0,1,.47,0,.46.46,0,0,1,.24.4v8.73a.47.47,0,0,1-.24.41l-7.56,4.36a.44.44,0,0,1-.47,0,.47.47,0,0,1-.23-.41Z" fill="white"></path>
      <path d="M.24,15.49A.47.47,0,0,1,0,15.08V6.35a.47.47,0,0,1,.24-.41.49.49,0,0,1,.47,0l7.55,4.37a.46.46,0,0,1,.24.41v8.72a.46.46,0,0,1-.24.41.44.44,0,0,1-.47,0Z" fill="white"></path>
      <path d="M1.19,5.24a.46.46,0,0,1,0-.81L8.75.06a.49.49,0,0,1,.47,0l7.56,4.37a.47.47,0,0,1,0,.81L9.22,9.61a.49.49,0,0,1-.47,0Z" fill="white"></path>
    </g>
  </svg>
  <span style="font-weight: 600;">Dartos</span>
  <span style="font-weight: 600; padding-bottom: 15px; font-size: 15px;">v1</span>
`;n.appendChild(o);function g(e,t){let s=document.createElement("button");s.textContent=e,s.className="button",s.style.padding="8px 12px",s.style.width="100%",s.style.border="none",s.style.outline="none",s.style.borderRadius="5px",s.style.cursor="pointer",s.style.margin="5px 0",s.style.backgroundColor="rgba(20, 20, 20, 0.75)",s.style.color="white",s.addEventListener("click",()=>t(s)),n.appendChild(s)}var h=!1,u={x:0,y:0};o.addEventListener("mousedown",e=>{h=!0,u.x=e.clientX-n.getBoundingClientRect().left,u.y=e.clientY-n.getBoundingClientRect().top,o.style.cursor="grabbing"});document.addEventListener("mousemove",e=>{h&&(n.style.left=`${e.clientX-u.x}px`,n.style.top=`${e.clientY-u.y}px`)});document.addEventListener("mouseup",()=>{h=!1,o.style.cursor="grab"});g("Skip Lesson",y);g("Custom Background",()=>{let e=document.querySelector("#root > div > div > img");if(!e){let s=document.querySelector("#root > div > div > svg");s.outerHTML="<img width='100%' height='100%' style='position:fixed;'>"}let t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=s=>{let i=s.target.files[0];i&&(e.src=URL.createObjectURL(i))},t.click()});g("Discord",()=>window.open("https://discord.gg/jqAzRnNK9w","_blank"));})();
